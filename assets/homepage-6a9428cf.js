import{o as g,c as v,e,h as m,r as A,D as C,m as V,i as r,u as o,t as u,A as E,v as a,x as d,M as w,w as x,n as b,N as U,B as M,O as N,P as T,Q as I,H as h}from"./index-fd57ddf8.js";import{I as $}from"./user-20-solid-7819ed41.js";import{e as _,s as H}from"./useNotification-d5b03d5c.js";const O={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},S=e("g",{fill:"currentColor"},[e("path",{d:"m5.433 13.917l1.262-3.155A4 4 0 0 1 7.58 9.42l6.92-6.918a2.121 2.121 0 0 1 3 3l-6.92 6.918c-.383.383-.84.685-1.343.886l-3.154 1.262a.5.5 0 0 1-.65-.65Z"}),e("path",{d:"M3.5 5.75c0-.69.56-1.25 1.25-1.25H10A.75.75 0 0 0 10 3H4.75A2.75 2.75 0 0 0 2 5.75v9.5A2.75 2.75 0 0 0 4.75 18h9.5A2.75 2.75 0 0 0 17 15.25V10a.75.75 0 0 0-1.5 0v5.25c0 .69-.56 1.25-1.25 1.25h-9.5c-.69 0-1.25-.56-1.25-1.25v-9.5Z"})],-1),Z=[S];function q(y,s){return g(),v("svg",O,Z)}const z={name:"heroicons-pencil-square-20-solid",render:q},G={class:"p-0 md:p-8 lg:p-12"},Q={class:"flex items-center gap-2 px-1 py-3"},R={class:"font-medium tracking-wide"},j={class:"flex flex-col gap-5 px-1 py-3"},F={class:"flex items-center gap-2"},J=e("div",{class:"font-medium tracking-wide"},"編輯會員資料",-1),K={class:"relative w-full space-y-2 before:content-[''] before:absolute before:bottom-0 before:left-0 before:right-0 before:border pb-5 before:border-[#DDBEA9]"},L={class:"flex flex-col w-full gap-1 py-2 md:flex-row"},W=e("label",{for:"name",class:"flex items-center w-full text md:w-1/5 after:content-['*'] after:ml-0.5 after:text-red-500"},"姓名",-1),X={class:"flex flex-col w-full gap-1 py-2 md:flex-row"},Y=e("label",{class:"flex items-center w-full text md:w-1/5 after:content-['*'] after:ml-0.5 after:text-red-500"},"電子信箱",-1),ee={class:"block w-full select-none md:w-4/5 py-1 px-2 border-2 rounded-md border-[#DDBEA9] text-base tracking-wide text-[#323232]"},te={class:"flex flex-col w-full gap-1 py-2 md:flex-row"},se=e("label",{for:"phone",class:"flex items-center w-full text md:w-1/5"},"聯絡電話",-1),oe={class:"flex flex-col w-full gap-1 py-2 md:flex-row"},le=e("label",{for:"address",class:"flex items-center w-full text md:w-1/5"},"寄件地址",-1),ae={class:"relative w-full space-y-2 before:content-[''] before:absolute before:bottom-0 before:left-0 before:right-0 before:border pb-5 before:border-[#DDBEA9]"},ne=e("span",{class:"block text"},"如若不需更改密碼，請直接留空",-1),de={class:"flex flex-col w-full gap-1 py-2 md:flex-row"},re=e("label",{for:"password",class:"flex items-center w-full text md:w-1/5"},"原始密碼",-1),ce={class:"flex flex-col w-full gap-1 py-2 md:flex-row"},ie=e("label",{for:"newPassword",class:"flex items-center w-full text md:w-1/5"},"設定新密碼",-1),fe={class:"flex flex-col w-full gap-1 py-2 md:flex-row"},ue=e("label",{for:"checkPassword",class:"flex items-center w-full text md:w-1/5"},"確認新密碼",-1),pe={class:"flex flex-col w-full gap-1 py-2 md:flex-row"},me=e("label",{class:"flex items-center w-full text md:w-1/5"},"電子報",-1),we={class:"w-full py-2 space-x-2"},xe=e("label",{for:"one",class:"text peer-checked/one:text-sky-500"},"訂閱",-1),be=e("label",{for:"two",class:"text peer-checked/Two:text-sky-500"},"不訂閱",-1),he=e("span",{class:"text-xs text"},"訂閱商品/活動訊息，我們將不定期透過email通知最新商品活動及優惠訊息。",-1),_e={class:"flex gap-5 mt-10"},De={__name:"homepage",setup(y){const s=m({account:"",name:"",mail:"",phone:"",address:"",password:"",newPassword:"",checkPassword:"",sub:"One"}),c=A([{threshold:0,name:"銅級會員",color:"bg-[#b87333]",textColor:"text-white"},{threshold:5e3,name:"銀級會員",color:"bg-[#c0c0c0]",textColor:"text-white"},{threshold:1e4,name:"金級會員",color:"bg-[#ffd700]",textColor:"text-[#403D39]"},{threshold:2e4,name:"白金會員",color:"bg-[#e5e4e2]",textColor:"text-[#403D39]"}]),i=m(!1),f=C(()=>{let n;for(let t=c.length-1;t>=0;t--)if(c[t].threshold<=0){n=c[t];break}return n}),p=async()=>{const n="";try{await b(U,n,t=>{s.value.account=t.Data.Account,s.value.name=t.Data.Name,s.value.mail=t.Data.Email,s.value.phone=t.Data.Phone,s.value.address=t.Data.Address})}catch(t){_("會員資料取得失敗",t)}},D=async()=>{i.value=!0,await M(1e3),await k(),await p()},k=async()=>{const n={name:s.value.name,phone:s.value.phone,address:s.value.address,password:s.value.password,newPassword:s.value.newPassword,checkPassword:s.value.checkPassword};try{await b(N,n,()=>{H("會員資料更新成功")})}catch(t){_("會員資料更新失敗",t)}finally{i.value=!1}};return V(async()=>{await p()}),(n,t)=>{const P=T,B=I;return g(),v("div",G,[e("div",Q,[r(o($),{class:"w-8 h-8 border-2 border-[#6B705C] rounded-full text-[#6B705C]"}),e("div",R,u(o(s).account),1),e("span",{class:E(["px-3 ml-3 rounded-md md:px-5 text",[o(f).color,o(f).textColor]])},u(o(f).name),3)]),e("div",j,[e("div",F,[r(o(z),{class:"w-8 h-8 border-2 border-[#6B705C] rounded-full text-[#6B705C]"}),J]),e("div",K,[e("div",L,[W,a(e("input",{type:"text",name:"name",id:"name","onUpdate:modelValue":t[0]||(t[0]=l=>o(s).name=l),class:"w-full md:w-4/5 py-1 px-2 bg-transparent border-2 rounded-md border-[#DDBEA9] text-base tracking-wide text-[#323232] focus:ring-0 focus:outline-none"},null,512),[[d,o(s).name]])]),e("div",X,[Y,e("span",ee,u(o(s).mail),1)]),e("div",te,[se,a(e("input",{type:"text",name:"phone",id:"phone","onUpdate:modelValue":t[1]||(t[1]=l=>o(s).phone=l),class:"w-full md:w-4/5 py-1 px-2 bg-transparent border-2 rounded-md border-[#DDBEA9] text-base tracking-wide text-[#323232] focus:ring-0 focus:outline-none"},null,512),[[d,o(s).phone]])]),e("div",oe,[le,a(e("input",{type:"text",name:"address",id:"address","onUpdate:modelValue":t[2]||(t[2]=l=>o(s).address=l),class:"w-full md:w-4/5 py-1 px-2 bg-transparent border-2 rounded-md border-[#DDBEA9] text-base tracking-wide text-[#323232] focus:ring-0 focus:outline-none"},null,512),[[d,o(s).address]])])]),e("div",ae,[ne,e("div",de,[re,a(e("input",{type:"text",name:"password",id:"password","onUpdate:modelValue":t[3]||(t[3]=l=>o(s).password=l),class:"w-full md:w-4/5 py-1 px-2 bg-transparent border-2 rounded-md border-[#DDBEA9] text-base tracking-wide text-[#323232] focus:ring-0 focus:outline-none"},null,512),[[d,o(s).password]])]),e("div",ce,[ie,a(e("input",{type:"text",name:"newPassword",id:"newPassword","onUpdate:modelValue":t[4]||(t[4]=l=>o(s).newPassword=l),class:"w-full md:w-4/5 py-1 px-2 bg-transparent border-2 rounded-md border-[#DDBEA9] text-base tracking-wide text-[#323232] focus:ring-0 focus:outline-none"},null,512),[[d,o(s).newPassword]])]),e("div",fe,[ue,a(e("input",{type:"text",name:"checkPassword",id:"checkPassword","onUpdate:modelValue":t[5]||(t[5]=l=>o(s).checkPassword=l),class:"w-full md:w-4/5 py-1 px-2 bg-transparent border-2 rounded-md border-[#DDBEA9] text-base tracking-wide text-[#323232] focus:ring-0 focus:outline-none"},null,512),[[d,o(s).checkPassword]])])]),e("div",null,[e("div",pe,[me,e("div",we,[a(e("input",{type:"radio",id:"one",value:"One","onUpdate:modelValue":t[6]||(t[6]=l=>o(s).sub=l),class:"peer/one"},null,512),[[w,o(s).sub]]),xe,a(e("input",{type:"radio",id:"two",value:"Two","onUpdate:modelValue":t[7]||(t[7]=l=>o(s).sub=l),class:"peer/Two"},null,512),[[w,o(s).sub]]),be])]),he]),e("div",_e,[r(P,{class:"w-full"},{default:x(()=>[h("重新填寫")]),_:1}),r(B,{type:"submit",loading:o(i),onClick:D,class:"w-full"},{default:x(()=>[h("儲存變更")]),_:1},8,["loading"])])])])}}};export{De as default};
