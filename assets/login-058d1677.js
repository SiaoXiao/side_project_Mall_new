import{o as c,c as g,e,h as _,g as V,f as T,r as z,m as O,s as k,i as A,u as s,v as m,x as y,t as C,d as h,j as M,y as j,z as L,A as N,B as U,n as F,C as G,D as J,w as K,K as H,E as Y,G as $,H as P,I as E,J as B}from"./index-fd57ddf8.js";import{_ as W}from"./index-8a070b16.js";import{e as D,s as q}from"./useNotification-d5b03d5c.js";const Q={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},X=e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5.121 17.804A13.937 13.937 0 0 1 12 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 1 1-6 0a3 3 0 0 1 6 0Zm6 2a9 9 0 1 1-18 0a9 9 0 0 1 18 0Z"},null,-1),ee=[X];function te(a,l){return c(),g("svg",Q,ee)}const se={name:"heroicons-outline-user-circle",render:te},oe={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},re=e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2Zm10-10V7a4 4 0 0 0-8 0v4h8Z"},null,-1),ae=[re];function ne(a,l){return c(),g("svg",oe,ae)}const ie={name:"heroicons-outline-lock-closed",render:ne},le={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ce=e("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[e("path",{d:"M15 12a3 3 0 1 1-6 0a3 3 0 0 1 6 0Z"}),e("path",{d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7c-4.477 0-8.268-2.943-9.542-7Z"})],-1),de=[ce];function ue(a,l){return c(),g("svg",le,de)}const me={name:"heroicons-outline-eye",render:ue},pe={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},_e=e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0 1 12 19c-4.478 0-8.268-2.943-9.543-7A9.97 9.97 0 0 1 4.02 8.971m5.858.908a3 3 0 1 1 4.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88L6.59 6.59m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0 1 12 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 0 1-4.132 5.411m0 0L21 21"},null,-1),fe=[_e];function he(a,l){return c(),g("svg",pe,fe)}const ge={name:"heroicons-outline-eye-off",render:he},b=a=>a.trim()!=="",Je=a=>/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(a),Ke=a=>/^(886)?09\d{8}$/.test(a),ve=["onSubmit"],we=e("legend",{class:"mb-3 text-center titleText"},"會員登入",-1),be={class:"flex flex-col mb-3 tracking-wider"},xe={class:"relative flex items-center gap-2 pr-2 before:absolute before:content before:w-full before:bottom-0 before:left-0 before:h-[2px] before:bg-[#323232]"},ke=e("label",{for:"email",class:"whitespace-nowrap"},"帳號",-1),ye={class:"w-full h-6 px-3 pt-1"},Ce={class:"text-sm tracking-wide text-[#dc2626]"},Me={class:"flex flex-col mb-3 tracking-wider"},$e={class:"relative flex items-center gap-2 py-2 before:absolute before:content before:w-full before:bottom-0 before:left-0 before:h-[2px] before:bg-[#323232]"},Se=e("label",{for:"password",class:"whitespace-nowrap"},"密碼",-1),Ae={class:"w-full h-6 px-3 pt-1"},Pe={class:"text-sm tracking-wide text-[#dc2626]"},Ee={class:"flex items-center justify-between mb-6 select-none"},Be=e("label",{for:"remember",class:"text-sm tracking-wide text-[#323232]"},"記住帳號",-1),De={class:"flex"},Te={class:"p-2 bg-gray-500"},Oe={class:"text-base font-bold tracking-wider text-white"},Re={class:"submit_box"},Ze=["disabled"],Ie={__name:"LoginComponent",setup(a){const l=_(null),p=_(!1),u=_(!1),n=_("isRemember"),f=V(),x=T(),t=z({email:{value:"test00001",errorMessage:""},password:{value:"12345678",errorMessage:""},otp:"",isSubmit:!1}),d=_(""),v=()=>{p.value=!p.value,l.value.type=p.value?"text":"password"},w=()=>{const o=b(t.email.value),r=b(t.password.value);return o?r?!0:(t.password.errorMessage="密碼不能為空白",!1):(t.email.errorMessage="帳號不能為空白",!1)},R=async()=>{t.isSubmit=!0,await U(1e3),w()?S():t.isSubmit=!1},S=async()=>{const o={Account:t.email.value,Password:t.password.value,OTP:t.otp};try{await f.dispatch("memberModules/loginMember",o),await Z()}catch(r){D("登入失敗",r)}finally{t.isSubmit=!1}},Z=async()=>{q("登入成功"),await x.push("/")},I=async()=>{try{await F(G,"",o=>{d.value=o.Data.OTP})}catch(o){D("OTP Error",o)}};return O(async()=>{await I();const o=localStorage.getItem(n.value);if(o){const{account:r,pwd:i}=JSON.parse(o);u.value=!0,t.email.value=r,t.password.value=i}else u.value=!1}),k(()=>t.email.value,o=>{b(o)?t.email.errorMessage="":t.email.errorMessage="帳號不能為空白"}),k(()=>t.password.value,o=>{b(o)?t.password.errorMessage="":t.password.errorMessage="密碼不能為空白"}),k(u,o=>{const{email:r,password:i}=t;o?localStorage.setItem(n.value,JSON.stringify({account:r.value,pwd:i.value})):localStorage.removeItem(n.value)}),(o,r)=>(c(),g("form",{class:"px-6 py-3 form",onSubmit:M(S,["prevent"]),autocomplete:"on"},[e("fieldset",null,[we,e("div",be,[e("div",xe,[A(s(se),{class:"w-9 h-9"}),ke,m(e("input",{type:"email",name:"email",id:"email",class:"w-full bg-transparent border-none text-base tracking-wide text-[#323232] focus:ring-0 focus:outline-none","onUpdate:modelValue":r[0]||(r[0]=i=>s(t).email.value=i)},null,512),[[y,s(t).email.value]])]),e("div",ye,[e("p",Ce,C(s(t).email.errorMessage),1)])]),e("div",Me,[e("div",$e,[A(s(ie),{class:"w-9 h-9"}),Se,m(e("input",{ref_key:"inputPwdRef",ref:l,type:"password",name:"password",id:"password",class:"w-full bg-transparent border-none text-base tracking-wide text-[#323232] focus:ring-0 focus:outline-none","onUpdate:modelValue":r[1]||(r[1]=i=>s(t).password.value=i)},null,512),[[y,s(t).password.value]]),s(p)?(c(),h(s(ge),{key:1,class:"cursor-pointer w-9 h-9",onClick:M(v,["prevent"])},null,8,["onClick"])):(c(),h(s(me),{key:0,class:"cursor-pointer w-9 h-9",onClick:M(v,["prevent"])},null,8,["onClick"]))]),e("div",Ae,[e("p",Pe,C(s(t).password.errorMessage),1)])]),e("div",Ee,[e("div",null,[m(e("input",{type:"checkbox",name:"remember",id:"remember",class:"mr-2","onUpdate:modelValue":r[2]||(r[2]=i=>L(u)?u.value=i:null)},null,512),[[j,s(u)]]),Be]),e("div",De,[m(e("input",{"onUpdate:modelValue":r[3]||(r[3]=i=>s(t).otp=i),type:"text",class:"w-[60px] text-center text-base tracking-wide focus:outline-none border-2 border-gray-500"},null,512),[[y,s(t).otp]]),e("div",Te,[e("span",Oe,C(s(d)),1)])])]),e("div",Re,[e("button",{class:N(["w-full p-3 rounded-md shadow-md bg-[#FFE8D6] hover:bg-[#DDBEA9] transition-colors duration-150 text-[#252422] hover:text-white",[s(t).isSubmit?"bg-gray-300 text-gray-400 hover:bg-gray-300 hover:text-gray-400":""]]),onClick:R,disabled:s(t).isSubmit}," 登入 ",10,Ze)])])],40,ve))}},Ve={class:"flex flex-col items-center justify-center h-full my-10 sm:my-0 sm:h-calc"},ze={class:"px-6 text-sm text"},je={class:"px-6 mt-3 text-sm text"},Le={class:"px-6 mt-3"},Ne={__name:"login",setup(a){const l=E(()=>B(()=>import("./ForgotPasswordComponent-3646021d.js"),["assets/ForgotPasswordComponent-3646021d.js","assets/index-fd57ddf8.js","assets/index-3bb3c866.css","assets/envelope-e7c862eb.js","assets/useNotification-d5b03d5c.js","assets/index-8a070b16.js","assets/user-20-solid-7819ed41.js","assets/trash-035f5d7d.js","assets/useUser-77d418ae.js"])),p=E(()=>B(()=>import("./RegisterComponent-2894f132.js"),["assets/RegisterComponent-2894f132.js","assets/index-fd57ddf8.js","assets/index-3bb3c866.css","assets/envelope-e7c862eb.js","assets/useNotification-d5b03d5c.js","assets/index-8a070b16.js","assets/user-20-solid-7819ed41.js","assets/trash-035f5d7d.js","assets/useUser-77d418ae.js"])),u=T(),n=_("login"),f=t=>{switch(t){case"login":n.value="login";break;case"forgotPassword":n.value="forgotPassword";break;case"register":n.value="register";break}},x=J(()=>{switch(n.value){case"login":return Ie;case"forgotPassword":return l;case"register":return p}});return O(async()=>{console.log("You are running in production mode.");const t=JSON.parse(localStorage.getItem("memberInfo"));(t==null?void 0:t.token)!==""&&t&&u.push("/user")}),(t,d)=>{const v=W;return c(),h(v,null,{default:K(()=>[e("main",Ve,[e("div",null,[(c(),h(H,null,[(c(),h(Y(s(x))))],1024)),e("div",null,[m(e("div",ze,[P(" 沒有帳號? "),e("span",{class:"text-base font-bold tracking-wide transition-colors duration-150 cursor-pointer text-[#CB997E] hover:text-[#DDBEA9]",onClick:d[0]||(d[0]=w=>f("register"))},"申請帳號")],512),[[$,s(n)!=="register"]]),m(e("div",je,[P(" 已有帳號 "),e("span",{class:"text-base font-bold tracking-wide transition-colors duration-150 cursor-pointer text-[#CB997E] hover:text-[#DDBEA9]",onClick:d[1]||(d[1]=w=>f("login"))},"登入")],512),[[$,s(n)!=="login"]])]),m(e("div",Le,[e("span",{class:"text-sm link",onClick:d[2]||(d[2]=w=>f("forgotPassword"))},"忘記密碼?")],512),[[$,s(n)!=="forgotPassword"]])])])]),_:1})}}},He=Object.freeze(Object.defineProperty({__proto__:null,default:Ne},Symbol.toStringTag,{value:"Module"}));export{ie as I,Ke as M,b as a,se as b,me as c,ge as d,He as l,Je as v};
